
 
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Speakify</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">

  <!-- Tailwind custom font config -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            pacifico: ['Pacifico', 'cursive'],
          }
        }
      }
    }
  </script>

  <style>
    body {
      background: radial-gradient(circle at top, #0a0f2e, #010416);
      color: #ffffff;
    }
    .avatar {
      font-size: 60px; /* smaller to fit screen */
      transition: transform 0.2s;
      display: inline-block;
    }
    .mic-icon {
      position: absolute;
      right: 12px;
      bottom: 12px;
      font-size: 1.2rem;
      pointer-events: none;
      color: #3b82f6;
    }
    .sparkle {
      position: absolute;
      width: 6px;
      height: 6px;
      background: linear-gradient(45deg, #3b82f6, #9333ea);
      border-radius: 50%;
      animation: sparkleAnim 2s infinite;
      opacity: 0.8;
    }
    @keyframes sparkleAnim {
      0% { transform: translateY(0) scale(1); opacity: 0.8; }
      50% { transform: translateY(-5px) scale(1.2); opacity: 1; }
      100% { transform: translateY(0) scale(1); opacity: 0.8; }
    }

    @keyframes glowWhiteGreen {
      0%, 100% { text-shadow: 0 0 5px #1c2b1c, 0 0 10px #84067a; color: #d5c4c4; }
      50% { text-shadow: 0 0 15px #16033a, 0 0 30px #145d95; color: #ffffff; }
    }

    .glow-white-green {
      animation: glowWhiteGreen 1.5s infinite;
    }

    @keyframes glow {
      0% { box-shadow: 0 0 5px #3b82f6; }
      50% { box-shadow: 0 0 20px #3b82f6; }
      100% { box-shadow: 0 0 5px #3b82f6; }
    }

    .glow {
      animation: glow 1s infinite;
    }
  </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen font-sans relative overflow-hidden">

  <!-- Sparkles -->
  <div class="sparkle" style="top:20px; left:10%;"></div>
  <div class="sparkle" style="top:50px; left:70%;"></div>
  <div class="sparkle" style="top:200px; left:30%;"></div>
  <div class="sparkle" style="top:150px; left:80%;"></div>

  <h1 class="text-5xl font-extrabold mb-2 drop-shadow-lg font-pacifico glow-white-green">SPEAKIFY</h1>
  <p class="text-xl mb-6 text-gray-300">Welcome to your TTS playground!</p>

  <div class="flex flex-col items-center gap-4 w-full max-w-md bg-gray-900 bg-opacity-70 p-6 rounded-2xl shadow-2xl relative">
    
    <!-- Avatar -->
    <div id="avatar" class="avatar mb-4">😊</div>

    <!-- Text area with mic icon -->
    <div class="relative w-full">
      <textarea id="textArea" placeholder="🎤 Type or speak something..." class="w-full border border-gray-700 rounded-xl p-4 pr-10 h-32 resize-none text-gray-100 bg-gray-800 placeholder-gray-400 text-lg"></textarea>
      <span class="mic-icon">🎤</span>
      <span id="typingEmoji" class="absolute right-10 bottom-3 text-xl hidden">💬</span>
    </div>

    <!-- Language selection -->
    <select id="languageSelect" class="border border-gray-700 rounded-lg p-2 w-full text-gray-100 bg-gray-800">
      <option value="en-US">English (US)</option>
      <option value="fr-FR">French (FR)</option>
      <option value="es-ES">Spanish (ES)</option>
      <option value="de-DE">German (DE)</option>
      <option value="ja-JP">Japanese (JP)</option>
    </select>

    <!-- Voice selection -->
    <select id="voiceSelect" class="border border-gray-700 rounded-lg p-2 w-full text-gray-100 bg-gray-800">
      <option value="Joanna">Joanna</option>
      <option value="Matthew">Matthew</option>
      <option value="Ivy">Ivy</option>
      <option value="Justin">Justin</option>
    </select>

    <!-- Generate button -->
    <button id="speakBtn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg mt-2 w-full shadow-md hover:shadow-xl transition-all">
      GENERATE
    </button>

    <!-- Audio player -->
    <audio id="audioPlayer" controls class="w-full mt-4 rounded-lg bg-gray-800"></audio>
  </div>

  <script>
    const textArea = document.getElementById('textArea');
    const languageSelect = document.getElementById('languageSelect');
    const voiceSelect = document.getElementById('voiceSelect');
    const speakBtn = document.getElementById('speakBtn');
    const audioPlayer = document.getElementById('audioPlayer');
    const avatar = document.getElementById('avatar');
    const typingEmoji = document.getElementById('typingEmoji');

    const emojis = ["😊","😎","😁","😮","🤩","😇","😂","😛"];
    let emojiInterval;

    textArea.addEventListener('input', () => {
      typingEmoji.style.display = textArea.value.length > 0 ? 'block' : 'none';
    });

    speakBtn.addEventListener('click', async () => {
      const text = textArea.value.trim();
      if (!text) return alert("Please type something!");

      const selectedLang = languageSelect.value;
      const selectedVoiceName = voiceSelect.value;

      // Start cycling emojis
      let i = 0;
      emojiInterval = setInterval(() => {
        avatar.textContent = emojis[i % emojis.length];
        i++;
      }, 300);

      // Start glowing button
      speakBtn.classList.add('glow');
      typingEmoji.style.display = 'none';

      try {
        const response = await fetch(
          "https://2555imwyy8.execute-api.us-east-1.amazonaws.com/dev/speak",
          {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ text, voice: selectedVoiceName, language: selectedLang })
          }
        );

        const data = await response.json();
        if (!data.audio) throw new Error("No audio returned from backend");

        const audioBase64 = data.audio;
        const audioBlob = new Blob([Uint8Array.from(atob(audioBase64), c => c.charCodeAt(0))], { type: 'audio/mp3' });
        const audioUrl = URL.createObjectURL(audioBlob);
        audioPlayer.src = audioUrl;
        audioPlayer.play();
      } catch (err) {
        console.error(err);
        alert("Error generating speech. Check console.");
      } finally {
        audioPlayer.onended = () => {
          clearInterval(emojiInterval);
          avatar.textContent = "😊"; // reset to default emoji
          speakBtn.classList.remove('glow'); // stop glowing
        };
      }
    });
  </script>
</body>
</html>

  